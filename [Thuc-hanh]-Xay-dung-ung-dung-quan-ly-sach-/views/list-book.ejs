<!DOCTYPE html>

<html lang="en">


<head>

    <title>Books</title>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>



</head>


<body>

<h3>List books</h3>

<% for (const book of books) { %>

    <p>Name: <%= book.name %>

    </p>

    <p>Price: <%= book.price %>

    </p>

    <p>Quantity: <%= book.quantity %>

    </p>

    <p>Author: <%= book.author %>

    </p>

    <button onclick="detail('<%= book.id %>')">Detail</button>

    <button onclick="deleteBook('<%= book.id %>')">Delete</button>

<% } %>

</body>

<script type="text/javascript">


    const detail = (id) => {

        window.open('http://localhost:3000/book/detail' + '?' + 'id=' + id);

    };


    function deleteBook(id) {
        $.ajax({
            type: "DELETE",
            url: "http://localhost:3000/book/delete/" + id,
            contentType: "application/json",
            success: function (result) {
                console.log('success')
            },

            error: function (xhr, ajaxOptions, thrownError) {
                console.log(this.data)

                console.log(xhr.status);

                console.log(thrownError);

            }
        });

        location.reload();

    }


</script>
</html>